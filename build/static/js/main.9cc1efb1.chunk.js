(this["webpackJsonptrivia-app"]=this["webpackJsonptrivia-app"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(31),s=n.n(o),a=n(3),u=n.n(a),i=n(6),j=n(2),b=n(4),l=n(5),d=n.n(l),h=n(14),O=n(12),f=n.n(O),p=n(0);var x=function(e){var t=e.setPlayer,n=Object(r.useState)(),c=Object(j.a)(n,2),o=c[0],s=c[1],a=Object(r.useState)(),l=Object(j.a)(a,2),O=l[0],x=l[1],v=Object(r.useState)(!1),m=Object(j.a)(v,2),k=m[0],C=m[1],g=function(){var e=Object(i.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/user/login",{name:o,password:O});case 2:n=e.sent,r=n.data,f.a.set("token",r.accessToken),f.a.set("refreshToken",r.refreshToken),t({name:o,score:0,correct:0,mistakes:0}),C(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{id:"Login",children:[k&&Object(p.jsx)(b.a,{to:"/game"}),Object(p.jsx)("h1",{id:"Login-Header",children:"Login page"}),Object(p.jsx)("h3",{children:"Enter your username to login"}),Object(p.jsx)("input",{onChange:function(e){s(e.target.value)},type:"text",placeholder:"Name"}),Object(p.jsx)("input",{onChange:function(e){x(e.target.value)},type:"password",placeholder:"Password"}),Object(p.jsx)("button",{onClick:function(){g()},children:"Login"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Not a user yet?"}),Object(p.jsx)(h.b,{to:"/signup",children:"Signup"})]})]})};function v(e){var t=Object(r.useState)(),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(),a=Object(j.a)(s,2),u=a[0],i=a[1],l=Object(r.useState)(!1),h=Object(j.a)(l,2),O=h[0],f=h[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Register"}),Object(p.jsxs)("form",{action:"/",children:[Object(p.jsx)("input",{onChange:function(e){o(e.target.value)},type:"text",placeholder:"Name"}),Object(p.jsx)("input",{onChange:function(e){i(e.target.value)},type:"password",placeholder:"Password"}),Object(p.jsx)("button",{type:"submit ",onClick:function(){d.a.post("/user/register",{name:c,password:u}).then((function(e){f(!0)})).catch((function(e){console.log(e)}))},children:"Singup"})]}),O&&Object(p.jsx)(b.a,{to:"/"})]})}var m=function(e){var t=e.currentPlayer,n=e.setPlayer,c=e.setTimer,o=e.setCount,s=e.setIncorrectCount,a=e.setQuestionCount,l=Object(r.useState)([]),h=Object(j.a)(l,2),O=h[0],f=h[1],x=Object(r.useState)(!1),v=Object(j.a)(x,2),m=v[0],k=v[1],C=Object(r.useState)(!1),g=Object(j.a)(C,2),y=g[0],w=g[1],S=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/leaderboard");case 2:t=e.sent,n=t.data,f(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){S()}),[]);var T=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/user/score",{name:t.name,score:t.score});case 2:k(!0),S();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y?Object(p.jsx)(b.a,{to:"/game"}):Object(p.jsxs)("div",{children:[t&&Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:[t.name," You scored: ",t.score," points!"]}),Object(p.jsxs)("p",{children:[t.name,", You are the weakest link"]}),!m&&Object(p.jsx)("button",{onClick:function(){T(t)},children:"Post your Score!"}),Object(p.jsx)("button",{onClick:function(){return n({name:t.name,score:0,correct:0,mistakes:0}),w(!0),c(20),o(0),s(0),void a(1)},children:"Play another round!"})]}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsx)("tr",{children:Object(p.jsx)("th",{children:"Leaderboard"})})}),Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"score"})]}),O.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.name}),Object(p.jsx)("td",{children:e.score})]},t)}))]})]})]})},k=(n(62),n(16));var C,g=function(){},y=function(){},w=function(){return 1e6+Math.floor(9e6*Math.random())},S=function(){var e=Object(i.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/savedquestion",{question:n.template,column:n.column,correct:n.correct,rating:t,ratingCounter:1,option1:n.countries[0].country,option2:n.countries[1].country,option3:n.countries[2].country,option4:n.countries[3].country});case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(e,t){var n=[];return n.push(Object(p.jsx)("h3",{children:"Rate this question!"},w())),n.push(Object(p.jsx)("button",{onClick:function(){return S(1,e,t)},children:"1"},w()),Object(p.jsx)("button",{onClick:function(){return S(2,e,t)},children:"2"},w()),Object(p.jsx)("button",{onClick:function(){return S(3,e,t)},children:"3"},w()),Object(p.jsx)("button",{onClick:function(){return S(4,e,t)},children:"4"},w()),Object(p.jsx)("button",{onClick:function(){return S(5,e,t)},children:"5"},w())),n},N=function(e){var t,n=e.updateCounter,c=e.updateCounterIncorrect,o=e.setQuestionType,s=e.setCounter,a=e.setAnswer,b=e.stop,l=Object(r.useState)(void 0),h=Object(j.a)(l,2),O=h[0],f=h[1],x=Object(r.useState)(!1),v=Object(j.a)(x,2),m=v[0],C=v[1],S=Object(r.useState)(!1),N=Object(j.a)(S,2),q=N[0],P=N[1],I=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/typeone");case 2:t=e.sent,n=t.data,f(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){I()}),[]),t=m?Object(p.jsx)("h1",{children:"Thank you for rating"}):T(O,C),O){var Q=[];if(!q){var L,A=Object(k.a)(O.countries);try{for(A.s();!(L=A.n()).done;){var E=L.value;E.country===O.correct?Q.push(Object(p.jsx)("button",{onClick:function(){return g(),n(),P(!0),a(void 0,1),void b()},children:E.country},w())):Q.push(Object(p.jsx)("button",{onClick:function(){return y(),c(),P(!0),a(O.correct,2),void b()},children:E.country},w()))}}catch(R){A.e(R)}finally{A.f()}}var M=void 0;return q&&(M=Object(p.jsx)("button",{onClick:function(){o(1),s()},children:"next question"})),Object(p.jsxs)("div",{className:"TypeOne",children:[Object(p.jsx)("h1",{children:O.template}),Q,Object(p.jsx)("div",{className:"rating",children:t}),M]})}return Object(p.jsx)("div",{className:"TypeOne",children:Object(p.jsx)("h1",{children:"Question is loading..."})})};var q=function(){},P=function(){},I=function(){return 1e6+Math.floor(9e6*Math.random())},Q=function(){var e=Object(i.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/savedquestion",{question:n.template+" "+n.askOn+"?",column:n.column,correct:n.correct,rating:t,ratingCounter:1,option1:n.countries[0][n.column],option2:n.countries[1][n.column],option3:n.countries[2][n.column],option4:n.countries[3][n.column]});case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(e,t){var n=[];return n.push(Object(p.jsx)("h3",{children:"Rate this question!"},I())),n.push(Object(p.jsx)("button",{onClick:function(){return Q(1,e,t)},children:"1"},I()),Object(p.jsx)("button",{onClick:function(){return Q(2,e,t)},children:"2"},I()),Object(p.jsx)("button",{onClick:function(){return Q(3,e,t)},children:"3"},I()),Object(p.jsx)("button",{onClick:function(){return Q(4,e,t)},children:"4"},I()),Object(p.jsx)("button",{onClick:function(){return Q(5,e,t)},children:"5"},I())),n},A=function(e){var t=e.updateCounter,n=e.updateCounterIncorrect,c=e.setQuestionType,o=e.setCounter,s=e.stop,a=e.setAnswer,b=Object(r.useState)(void 0),l=Object(j.a)(b,2),h=l[0],O=l[1],f=Object(r.useState)(void 0),x=Object(j.a)(f,2),v=x[0],m=x[1],g=Object(r.useState)(!1),y=Object(j.a)(g,2),w=y[0],S=y[1],T=Object(r.useState)(!1),N=Object(j.a)(T,2),Q=N[0],A=N[1],E=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/typetwo");case 2:t=e.sent,n=t.data,O(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){E()}),[]),h){var M,R=Object(k.a)(h.countries);try{for(R.s();!(M=R.n()).done;){var F=M.value;F.country===h.askOn&&(C=F[h.column])}}catch(U){R.e(U)}finally{R.f()}var Y,B=[];if(!w){var H,J=Object(k.a)(h.countries);try{for(J.s();!(H=J.n()).done;){var z=H.value;z.country===h.askOn?B.push(Object(p.jsx)("button",{onClick:function(){return q(),t(),S(!0),A(!0),a(void 0,1),void s()},children:z[h.column]},I())):B.push(Object(p.jsx)("button",{onClick:function(){return P(),n(),S(!0),A(!0),a(C,2),void s()},children:z[h.column]},I()))}}catch(U){J.e(U)}finally{J.f()}}Y=v?Object(p.jsx)("h1",{children:"Thank you for rating"}):L(h,m);var D=void 0;return Q&&(D=Object(p.jsx)("button",{onClick:function(){c(2),o()},children:"next question"})),Object(p.jsxs)("div",{className:"TypeTwo",children:[Object(p.jsxs)("h1",{children:[h.template," ",h.askOn]}),B,Object(p.jsx)("div",{className:"rating",children:Y}),D]})}return Object(p.jsx)("div",{className:"TypeTwo",children:Object(p.jsx)("h1",{children:"Question is loading..."})})};var E=function(e,t){var n=[];return n.push(Object(p.jsx)("h3",{children:"Rate this question!"},F())),n.push(Object(p.jsx)("button",{onClick:function(){return Y(1,e,t)},children:"1"},F()),Object(p.jsx)("button",{onClick:function(){return Y(2,e,t)},children:"2"},F()),Object(p.jsx)("button",{onClick:function(){return Y(3,e,t)},children:"3"},F()),Object(p.jsx)("button",{onClick:function(){return Y(4,e,t)},children:"4"},F()),Object(p.jsx)("button",{onClick:function(){return Y(5,e,t)},children:"5"},F())),n},M=function(){},R=function(){},F=function(){return 1e6+Math.floor(9e6*Math.random())},Y=function(){var e=Object(i.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.patch("/savedquestion",{id:n,rate:t});case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(e){var t=e.updateCounter,n=e.updateCounterIncorrect,c=e.setQuestionType,o=e.setCounter,s=e.stop,a=e.setAnswer,b=Object(r.useState)(void 0),l=Object(j.a)(b,2),h=l[0],O=l[1],f=Object(r.useState)(!1),x=Object(j.a)(f,2),v=x[0],m=x[1],k=Object(r.useState)(!1),C=Object(j.a)(k,2),g=C[0],y=C[1],w=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/savedquestion");case 2:t=e.sent,n=t.data,O(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){w()}),[]),h){for(var S,T=[],N=0,q=[h.option1,h.option2,h.option3,h.option4];N<q.length;N++){var P=q[N];P===h.correct?T.push(Object(p.jsx)("button",{onClick:function(){return a(void 0,1),M(),t(),y(!0),void s()},children:P},F())):T.push(Object(p.jsx)("button",{onClick:function(){return a(h.correct,2),R(),n(),y(!0),void s()},children:P},F()))}S=v?Object(p.jsx)("h1",{children:"Thank you for rating"}):E(h.id,m);var I=void 0;return g&&(T=void 0,I=Object(p.jsx)("button",{onClick:function(){c(0),o()},children:"next question"})),Object(p.jsxs)("div",{className:"SavedQuestion",children:[Object(p.jsx)("h1",{children:h.question}),T,Object(p.jsx)("div",{className:"rating",children:S}),I]})}return Object(p.jsx)("div",{className:"SavedQuestion",children:Object(p.jsx)("h1",{children:"Question is loading..."})})};var H=function(e){var t=e.player,n=e.setPlayer,c=Object(r.useState)(0),o=Object(j.a)(c,2),s=o[0],a=o[1],u=Object(r.useState)(0),i=Object(j.a)(u,2),b=i[0],l=i[1],d=Object(r.useState)(0),h=Object(j.a)(d,2),O=h[0],f=h[1],x=Object(r.useState)(20),v=Object(j.a)(x,2),k=v[0],C=v[1],g=Object(r.useState)(!0),y=Object(j.a)(g,2),w=y[0],S=y[1],T=Object(r.useState)("Click above to answer"),q=Object(j.a)(T,2),P=q[0],I=q[1],Q=Object(r.useState)(1),L=Object(j.a)(Q,2),E=L[0],M=L[1];!function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){function e(){n.current()}if(null!==t){var r=setInterval(e,t);return function(){return clearInterval(r)}}}),[t])}((function(){w&&(k>0?C(k-1):k<=0&&(z(),a(2!==s?s+1:0),S(!0)))}),1e3),Object(r.useEffect)((function(){var e=20-t.correct/2;if(w)return t.correct<30?C(e):C(5)}),[b]);var R,F=function(e,t){0===t&&I("Click above to answer"),1===t&&I("You are correct"),2===t&&I("The answer is ".concat(e))},Y=function(){n({name:t.name,score:t.score+(70*(1-(20-.5*t.correct-k)/(20-.5*b))+30),correct:t.correct+1,mistakes:t.mistakes})},H=function(){S(!1)},J=function(){l(b+1),S(!0),F(void 0,0),M(E+1)},z=function(){f(O+1),n({name:t.name,score:t.score,correct:t.correct,mistakes:t.mistakes+1})};return 0===s&&(R=Object(p.jsx)(N,{stop:H,setAnswer:F,updateCounter:Y,updateCounterIncorrect:z,setQuestionType:a,setCounter:J})),1===s&&(R=Object(p.jsx)(A,{stop:H,setAnswer:F,updateCounter:Y,updateCounterIncorrect:z,setQuestionType:a,setCounter:J})),2===s&&(R=Object(p.jsx)(B,{stop:H,setAnswer:F,updateCounter:Y,updateCounterIncorrect:z,setQuestionType:a,setCounter:J})),O<3?Object(p.jsxs)("div",{id:"Login",children:[Object(p.jsx)("h1",{children:t.name}),Object(p.jsxs)("h3",{children:["Your Score is: ",t.score]}),Object(p.jsxs)("h3",{children:["Correct answers: ",t.correct]}),Object(p.jsxs)("h3",{children:["Incorrect answers: ",O]}),Object(p.jsxs)("h2",{children:["question number: ",E]}),w&&k,R,P]}):Object(p.jsx)(m,{currentPlayer:t,setPlayer:n,setTimer:C,setCount:l,setIncorrectCount:f,setQuestionCount:M})};var J=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(!1),a=Object(j.a)(s,2),u=a[0],i=a[1];return Object(p.jsxs)("div",{className:"loginAndSignup",children:[c&&Object(p.jsx)(b.a,{to:"/login"}),u&&Object(p.jsx)(b.a,{to:"/signup"}),Object(p.jsx)("button",{onClick:function(){o(!0)},children:"Login"}),Object(p.jsx)("button",{onClick:function(){i(!0)},children:"SignUp"})]})};var z=function(){var e=Object(r.useState)({}),t=Object(j.a)(e,2),n=t[0],c=t[1],o=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/user/logout",{refToken:f.a.get("refreshToken")});case 2:c({}),f.a.remove("token"),f.a.remove("refreshToken");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{id:"navbar",children:Object(p.jsxs)(h.a,{children:[Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"navbarlist",children:[Object(p.jsx)("li",{className:"navbarli",children:Object(p.jsx)(h.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{className:"navbarli",children:Object(p.jsx)(h.b,{to:"/leaderboard",children:"Leaderboard"})}),Object(p.jsx)("li",{className:"navbarli logout",onClick:o,children:Object(p.jsx)(h.b,{to:"/",children:"Logout"})})]})}),Object(p.jsxs)(b.d,{children:[Object(p.jsx)(b.b,{exact:!0,path:"/",children:Object(p.jsx)(J,{})}),Object(p.jsx)(b.b,{exact:!0,path:"/login",children:Object(p.jsx)(x,{setPlayer:c})}),Object(p.jsx)(b.b,{exact:!0,path:"/leaderboard",children:Object(p.jsx)(m,{currentPlayer:void 0})}),Object(p.jsx)(b.b,{exact:!0,path:"/game",children:Object(p.jsx)(H,{player:n,setPlayer:c})}),Object(p.jsx)(b.b,{exact:!0,path:"/signup",children:Object(p.jsx)(v,{})})]})]})})};n(63);function D(e){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/user/token",{refToken:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}d.a.interceptors.response.use((function(e){return e}),function(){var e=Object(i.a)(u.a.mark((function e(t){var n,r,c,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.a.get("refreshToken"),303===t.response.status){e.next=4;break}return e.abrupt("return",t);case 4:return r=t.config,e.prev=5,e.next=8,D(n);case 8:return c=e.sent,o=c.accessToken,f.a.set("token","".concat(o),{expires:1}),e.next=13,d()(r);case 13:return s=e.sent,e.abrupt("return",s);case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}()),d.a.interceptors.request.use(function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("token");case 2:return n=e.sent,t.headers.Authorization="bearer "+n,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var G=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("header",{className:"App-header",children:Object(p.jsx)(z,{})})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),o(e),s(e)}))};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(G,{})}),document.getElementById("root")),K()}},[[64,1,2]]]);
//# sourceMappingURL=main.9cc1efb1.chunk.js.map